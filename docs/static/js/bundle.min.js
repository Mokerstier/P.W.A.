function Particle(){this.id=particles.length,this.init=function(){this.size=rand(.1,5),this.offset=this.size/2,this.color=ops.color,this.bounds={x:c.width+this.size,y:c.height+this.size},this.ticker=0,this.lifespan=ops.lifespan,ops.lifespan instanceof Array&&(this.lifespan=rand(ops.lifespan[0],ops.lifespan[1]));var yPos={top:-this.offset,center:c.height/2-this.offset,bottom:c.height-this.offset,random:rand(0,c.height)},xPos={left:-this.offset,center:c.width/2-this.offset,right:c.width-this.offset,random:rand(0,c.width)};"fade-out"==ops.mode&&(this.opacity=1),"cursor"==ops.spawn?(this.startX=this.x=mouse.x,this.startY=this.y=mouse.y):(this.startX=this.x=xPos[ops.spawn.split("-")[1]],this.startY=this.y=yPos[ops.spawn.split("-")[0]]),this.center={x:c.width/2,y:c.height/2},this.vx=ops.speed,this.vy=ops.speed,this.angle=radian(180-ops.startAngle-Math.random()*ops.angle)},this.update=function(frame){this.x+=Math.sin(this.angle)*this.vx,this.y+=Math.cos(this.angle)*this.vy,"fade-out"==ops.mode&&(this.opacity=1-(frame-this.ticker)/this.lifespan,this.id),this.ticker||(this.ticker=frame),frame-this.ticker>=this.lifespan?selfDestruct(this):this.draw()},this.draw=function(){ctx.fillStyle=hexToRGB(this.color,this.opacity),ctx.beginPath(),ctx.arc(this.x,this.y,this.size,0,2*Math.PI,!0),ctx.closePath(),ctx.fill()},this.init()}function rand(min,max){return Math.floor(Math.random()*(max-min))+min}function isOOB(p){if(p.x+p.size<0||p.x-p.size>p.bounds.x||p.y+p.size<0||p.y-p.size>p.bounds.y)return!0}function radian(angle){return angle*(Math.PI/180)}function getMouse(canvas,evt){var rect=canvas.getBoundingClientRect();return{x:(evt.clientX-rect.left)/(rect.right-rect.left)*canvas.width,y:(evt.clientY-rect.top)/(rect.bottom-rect.top)*canvas.height}}function getDistance(p1,p2){var dx=p2.x-p1.x,dy=p2.y-p1.y;return Math.sqrt(dx*dx+dy*dy)}function hexToRGB(hex,alpha){var r=parseInt(hex.slice(1,3),16),g=parseInt(hex.slice(3,5),16),b=parseInt(hex.slice(5,7),16);return alpha?"rgba("+r+", "+g+", "+b+", "+alpha+")":"rgb("+r+", "+g+", "+b+")"}function animate(frame){ctx.clearRect(0,0,c.width,c.height);for(var i=0;i<particles.length;i++)particles[i].update(frame);requestAnimationFrame(animate)}function generate(){particles.push(new Particle)}function selfDestruct(self){particles[particles.indexOf(self)]=null,particles=particles.filter(Boolean),ops.respawn&&"cursor"!==ops.spawn&&generate()}const ops={canvas:"canvas",count:25,speed:2,color:"#fc6c0d",startAngle:0,angle:360,spawn:"center-center",respawn:!0,mode:"fade-out",lifespan:[1500,4e3]},c=document.querySelector(ops.canvas),ctx=c.getContext("2d");let mouse={x:null,y:null},particles=[];if("cursor"==ops.spawn)c.addEventListener("mousemove",e=>{mouse=getMouse(c,e),generate(),console.log(particles.length)}),c.addEventListener("mouseleave",e=>{mouse.x=mouse.y=null});else for(let i=0;i<=ops.count;i++)generate();animate();